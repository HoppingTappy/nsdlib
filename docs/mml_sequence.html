<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>
<meta http-equiv='Content-Style-Type' content='text/css'>
<link rel="stylesheet" type="text/css" href="help.css">
<Title>MML reference: Music Sequence block</Title>
</HEAD>
<BODY>

<!-- header start -->
<div id='header'>
<h1>NSDL（NES Sound Driver Library）</h1>
<a href="index.html">トップ</a>＼
<a href="usage.html">使い方</a>＼
<a href="usage_nsc.html">MMLコンパイラ</a>＼
<a href="mml.html">MML文法</a>＼
</div>

<!-- contents start -->
<div id='contents'>
<h2>MML reference: Music Sequence block</h2>

<!-- ──────────────── -->
<div class='block'>
<h3>定義（Define）</h3>
<code><pre>
Sub(<var>n</var>){
	<var>subroutine sequence</var>
}
</pre></code>

<code><pre>
S(<var>n</var>){
	<var>subroutine sequence</var>
}
</pre></code>


<code><pre>
BGM(<var>n</var>){
	<var>bgm sequence</var>
}
</pre></code>

<code><pre>
SE(<var>n</var>){
	<var>se sequence</var>
}
</pre></code>
</div>

<!-- ──────────────── -->
<div class='block'>
<h3>引数（Inputs）</h3>

<h4>n</h4>
<p>
各ブロックの番号を指定します。
</p>

<h4>sequence</h4>
<p>
曲シーケンスのデータです。<br>
以下表のコマンドを記述して下さい。
</p>

<table>
<tr><th>Command</th><th>Default</th><th>Type</th><th>Contens</th></tr>
<tr><td>#priority <var>n</var>		</td><td>0 (#priority)</td><td>-</td><td>このシーケンス（SE）記述ブロック個別に優先度を設定します。<br>
													　（0 : 優先度高 ～ 3:優先度低）<br>
													（効果音の記述ブロックにのみ有効です。）</td></tr>
<tr><td>#label "<var>strings</var>"	</td><td>-	</td><td>-</td>
	<td>このシーケンス記述ブロック個別の曲名を設定します（エスケープシーケンス利用可）。<br>
		NSF2, NSFe共にメタデータ"#tlbl"を生成します。NSF1では未対応です。</td>
</tr>
<tr><td>#author "<var>strings</var>"	</td><td>-	</td><td>-</td>
	<td>このシーケンス記述ブロック個別の作曲者を設定します（エスケープシーケンス利用可）。<br>
		NSF2, NSFe共にメタデータ"#taut"を生成します。NSF1では未対応です。</td>
</tr>
<tr><td>#time <var>n</var>	</td><td>-1	</td><td>-</td>
	<td>このシーケンス記述ブロック個別の演奏時間をmsec単位で設定します。<br>
		0未満は、NSFプレイヤーのデフォルトの演奏時間となります。<br>
		0は、直ちにフェードアウトが始まることを意味します。<br>
		NSF2, NSFe共にメタデータ"#time"を生成します。NSF1では未対応です。</td>
</tr>
<tr><td>#fade <var>n</var>	</td><td>-1	</td><td>-</td>
	<td>このシーケンス記述ブロック個別のフェードアウト時間をmsec単位で設定します。<br>
		0未満は、NSFプレイヤーのデフォルトのフェードアウト時間となります。<br>
		0は、フェードアウトしない事を意味します。<br>
		NSF2, NSFe共にメタデータ"#fade"を生成します。NSF1では未対応です。</td>
</tr>
<tr><td><a href="mml_note.html">a</a></td><td>-</td><td>-</td><td>音符 (A, La, ラ)</td></tr>
<tr><td><a href="mml_note.html">b</a></td><td>-</td><td>-</td><td>音符 (B, Si, シ)</td></tr>
<tr><td><a href="mml_note.html">c</a></td><td>-</td><td>-</td><td>音符 (C, Do, ド)</td></tr>
<tr><td><a href="mml_note.html">d</a></td><td>-</td><td>-</td><td>音符 (D, Re, レ)</td></tr>
<tr><td><a href="mml_note.html">e</a></td><td>-</td><td>-</td><td>音符 (E, Mi, ミ)</td></tr>
<tr><td><a href="mml_note.html">f</a></td><td>-</td><td>-</td><td>音符 (F, Fa, ファ)</td></tr>
<tr><td><a href="mml_note.html">g</a></td><td>-</td><td>-</td><td>音符 (G, Sol, ソ)</td></tr>
<tr><td><a href="mml_jump2.html">j</a></td><td>0</td><td>-</td><td>早送りの有効・無効化（全トラックに効きます）</td></tr>
<tr><td><a href="mml_keyshift.html">k</a></td><td>0</td><td>Pseudo</td><td>キーシフト（絶対値）</td></tr>
<tr><td><a href="mml_keyshift.html">k_</a></td><td>-</td><td>Pseudo</td><td>キーシフト（相対値）</td></tr>
<tr><td><a href="mml_length.html">l</a></td><td>%24</td><td>-</td><td>音長を省略した時に適用する音長</td></tr>
<tr><td><a href="mml_octave.html">o</a></td><td>4</td><td>-</td><td>オクターブ</td></tr>
<tr><td><a href="mml_gate.html">q</a></td><td>0</td><td>-</td><td>ゲートクオンタイズ（Tick）</td></tr>
<tr><td><a href="mml_rest.html">r</a><td>`=' (#rest)</td><td>-</td></td><td>休符1</td></tr>
<tr><td rowspan='6'><a href="mml_sweep.html">s</a>	</td><td>0, 8 (off)		</td><td>-</td><td>APU(パルス波) : スイープ</td></tr>
<tr>												</td><td>255  (off)		</td><td>-</td><td>APU(三角波)   : リニアカウンタ</td></tr>
<tr>												</td><td>0				</td><td>-</td><td>FDS  : Sweep (Modulator) bias</td></tr>
<tr>												</td><td>0    (off)		</td><td>-</td><td>VRC7 : サスティン</td></tr>
<tr>												</td><td>56 (32 sample)	</td><td>-</td><td>n16x : 波形長設定</td></tr>
<tr>												</td><td>0, 0 (off)		</td><td>-</td><td>Sunsoft 5B : Envelop Switch & Type</td></tr>
<tr><td><a href="mml_tempo.html">t</a><td>120 (#timebase=24時)</td></td><td>-</td><td>テンポ</td></tr>
<tr><td><a href="mml_tempo.html">t_</a><td>-</td></td><td>-</td><td>相対テンポ</td></tr>
<tr><td><a href="mml_gate.html">u</a></td><td>0</td><td>-</td><td>前方からのゲートタイム</td></tr>
<tr><td><a href="mml_volume.html">v</a></td><td>15</td><td>-</td><td>音量</td></tr>
<tr><td><a href="mml_rest.html">w</a><td>`-' (#wait)</td><td>-</td></td><td>休符2</td></tr>
<tr><td><a href="mml_poke.html">y</a><td>-</td></td><td>-</td><td>メモリ書き込み</td></tr>
<tr><td><a href="mml_VRC7write.html">yV</a><td>-</td></td><td>-</td><td>VRC7レジスタ書き込み</td></tr>
<tr><td><a href="mml_detune.html">D</a></td><td>0</td><td>-</td><td>ディチューン（cent単位）</td></tr>
<tr><td><a href="mml_detune.html">D_</a></td><td>0</td><td>-</td><td>相対ディチューン（cent単位）</td></tr>
<tr><td><a href="mml_detune.html">D%</a></td><td>-</td><td>-</td><td>ディチューン（register単位）</td></tr>
<tr><td><a href="mml_detune.html">D%_</a></td><td>-</td><td>-</td><td>相対ディチューン（register単位）</td></tr>
<tr><td><a href="mml_echo.html">EC</a></td><td>*</td><td>Pseudo</td><td>疑似エコーの設定</td></tr>
<tr><td><a href="mml_echo_buffer.html">EC-</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファのリセット</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECa</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにラを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECb</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにシを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECc</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにドを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECd</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにレを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECe</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにミを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECf</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにファを書き込み</td></tr>
<tr><td><a href="mml_echo_buffer.html">ECg</a></td><td></td><td>Pseudo</td><td>疑似エコーバッファにソを書き込み</td></tr>
<tr><td><a href="mml_envelop.html">E@</a></td><td>*</td><td>-</td><td>音色エンベロープ・パターン</td></tr>
<tr><td><a href="mml_envelop.html">Ev</a></td><td>*</td><td>-</td><td>音量エンベロープ・パターン</td></tr>
<tr><td><a href="mml_envelop.html">Em</a></td><td>*</td><td>-</td><td>周波数エンベロープ・パターン</td></tr>
<tr><td><a href="mml_envelop.html">En</a></td><td>*</td><td>-</td><td>音程エンベロープ・パターン</td></tr>
<tr><td><a href="mml_s5b_envelope.html">F</a><td>不定</td></td><td>-</td><td>Sunsoft 5B エンベロープ周波数</td></tr>
<tr><td><a href="mml_jump.html">J</a></td><td>0</td><td>Pseudo</td><td>音符・休符の無効化（指定のトラックのみに効きます）</td></tr>
<tr><td><a href="mml_KeySignature.html">K{}</a></td><td>C-Dur</td><td>Pseudo</td><td>調号の指定（自動臨時記号）</td></tr>
<tr><td><a href="mml_loop.html">L</a></td><td>-</td><td>-</td><td>無限ループ（サブルーチンの記述ブロック内では無効）</td></tr>
<tr><td><a href="mml_N163_channel.html">NC</a></td><td>不定</td><td>-</td><td>n16x(n160,n161,n162,n163) チャンネル数設定</td></tr>
<tr><td><a href="mml_portamento.html">P</a></td><td>-</td><td>-</td><td>ポルタメント</td></tr>
<tr><td><a href="mml_gate.html">Q</a></td><td>8 (#QMax)</td><td>Pseudo</td><td>ゲートクオンタイズ（割合）</td></tr>
<tr><td><a href="mml_release.html">R@</a></td><td>0</td><td>-</td><td>Key off時の音色</td></tr>
<tr><td><a href="mml_release.html">Rv</a></td><td>2 (#ReleaseVolume)</td><td>-</td><td>Key off時の音量</td></tr>
<tr><td><a href="mml_release.html">Rm</a></td><td>2</td><td>-</td><td>Key off時のモード</td></tr>
<tr><td><a href="mml_sub.html">S</a></td><td>-</td><td>-</td><td>サブルーチン呼び出し（サブルーチンの記述ブロック内では無効です）</td></tr>
<tr><td><a href="mml_scale.html">Scale()<br>Mode()<br>Major<br>Minor<br>MMinor<br>HMinor</a></td>
											<td>Major</td><td>Pseudo</td><td>旋法・スケールの指定（自動臨時記号）</td></tr>
<tr><td><a href="mml_se.html">SE</a></td><td>-</td><td>-</td><td>効果音呼び出し</td></tr>
<tr><td><a href="mml_TR.html">TR</a></td><td>1</td><td>-</td><td>トラック（サブルーチンの記述ブロック内では無効です）</td></tr>
<tr><td><a href="mml_voice.html">@</a></td><td>2</td><td>-</td><td>音色（音色エンベロープ無効）</td></tr>
<tr><td><a href="mml_FDS_career.html">@FC</a></td><td>不定</td><td>-</td><td>FDS キャリア波形設定</td></tr>
<tr><td><a href="mml_FDS_frequency.html">@FF</a></td><td>不定</td><td>-</td><td>FDS モジュレータ周波数設定</td></tr>
<tr><td><a href="mml_FDS_modulator.html">@FM</a></td><td>不定</td><td>-</td><td>FDS モジュレータ波形設定</td></tr>
<tr><td><a href="mml_FDS_volume.html">@FV</a></td><td>0</td><td>-</td><td>FDS マスター音量設定</td></tr>
<tr><td><a href="mml_N163voice.html">@N<br>@NL</a></td><td>不定</td><td>-</td><td>n16x(n160,n161,n162,n163) 波形転送（ロード）</td></tr>
<tr><td><a href="mml_N163set.html">@NS</a></td><td>不定</td><td>-</td><td>n16x(n160,n161,n162,n163) 波形設定＆サンプル長指定</td></tr>
<tr><td><a href="mml_patch_seq.html">@P</a></td><td>*</td><td>Pseudo</td><td>音色パッチ</td></tr>
<tr><td><a href="mml_VRC7voice.html">@V</a></td><td>不定</td><td>-</td><td>VRC7ユーザー音色設定</td></tr>
<tr><td><a href="mml_repeatA.html">[  :  ]</a></td><td>-</td><td>(Pseudo)</td><td>リピート(Ａ)</td></tr>
<tr><td><a href="mml_repeatB.html">|:  \  :|</a></td><td>-</td><td>-</td><td>リピート(Ｂ)</td></tr>
<tr><td><a href="mml_tie.html">^</a></td><td>-</td><td>Combined</td><td>タイ</td></tr>
<tr><td><a href="mml_portamento2.html">{}</a></td><td>-</td><td>Combined</td><td>ポルタメント２</td></tr>
<tr><td><a href="mml_relative_octave.html">&lt;</a></td><td>-</td><td>-</td><td>オクターブ－１</td></tr>
<tr><td><a href="mml_relative_octave.html">&gt;</a></td><td>-</td><td>-</td><td>オクターブ＋１</td></tr>
<tr><td><a href="mml_relative_octave.html">"</a></td><td>-</td><td>-</td><td>オクターブ－１（次の音符のみ）</td></tr>
<tr><td><a href="mml_relative_octave.html">`</a></td><td>-</td><td>-</td><td>オクターブ＋１（次の音符のみ）</td></tr>
<tr><td><a href="mml_relative_volume.html">(</a></td><td>1</td><td>-</td><td>相対音量</td></tr>
<tr><td><a href="mml_relative_volume.html">)</a></td><td>1</td><td>-</td><td>相対音量</td></tr>
<tr><td><a href="mml_transpose.html">_</a></td><td>0</td><td>-</td><td>移調（絶対値）。</td></tr>
<tr><td><a href="mml_transpose.html">__</a></td><td>-</td><td>-</td><td>移調（相対値）。</td></tr>
<tr><td><a href="mml_macro.html">$</a></td><td>-</td><td>Pseudo</td><td>マクロ呼び出し。</td></tr>
<tr><td><a href="mml_local_macro.html">$$</a></td><td>-</td><td>Pseudo</td><td>ローカルマクロ設定。</td></tr>
<tr><td>|</td><td>-</td><td>Pseudo</td><td>小節線（コンパイルには反映されません）</td></tr>
</table>

<p></p>
<table>
<caption>Typeについて<caption>
<tr><td>-		</td><td>音源ドライバー側の実装です。<br>
					（当該コマンドが書かれた時点で、シーケンス・バイナリを出力します。）</td></tr>
<tr><td>Pseudo	</td><td>MMLコンパイラ側に実装される疑似命令です。<br>
					（当該コマンドが書かれた時点では、シーケンス・バイナリを出力しません。）</td></tr>
<tr><td>(Pseudo)</td><td>音源ドライバー側の実装ですが、場合によりMMLコンパイラ側の疑似命令に切り替わります。</td></tr>
<tr><td>Combined</td><td>MMLコンパイラ側での処理を伴う、音源ドライバー側の実装です<br>
					（当該コマンドが書かれた時点で、シーケンス・バイナリを出力します。）</td></tr>
</table>

</div>
<!-- ──────────────── -->
<div class='block'>
<h3>内容（Contents）</h3>

<p>
BGM,SE,サブルーチンの演奏パターンを定義します。<br>
シーケンスデータのサイズを最適化するためには、
ぜひ、<a href="format_music.html">BGM,SEデータフォーマット（Format of BGM and SE）</a>を御一読ください。<br>
</p>

</div>

<!-- ──────────────── -->
<div class='block'>
<h3>注意（Notes）</h3>
<p>
</p>

</div>

<!-- ──────────────── -->
<div class='block'>
<h3>例（Sample）</h3>

<p>
各コマンドのサンプルを参照して下さい。
</p>

</div>

</div>

</BODY>
</HTML>
